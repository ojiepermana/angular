// Enhanced Angular Material theme integration with shadcn/ui
// This bridges Angular Material's M3 design tokens with shadcn/ui theme variables
@use '@angular/material' as mat;

// Custom theme configuration that maps to shadcn/ui color scheme
@function create-custom-palette($base-color) {
  @return mat.m3-define-palette($base-color);
}

// Dynamic theme mixin that adapts to data-theme attribute
@mixin apply-material-theme($theme-name: 'default') {
  // Base Material 3 theme setup
  @include mat.theme((
    color: (
      primary: mat.m3-define-palette((
        0: #000000,
        10: #1a1625,
        20: #2f2c3b,
        30: #464357,
        40: #5e5b73,
        50: #777490,
        60: #918eae,
        70: #aca9cd,
        80: #c8c5ec,
        90: #e5e0ff,
        95: #f3efff,
        98: #fcf8ff,
        99: #fefbff,
        100: #ffffff,
      )),
      tertiary: mat.m3-define-palette((
        0: #000000,
        10: #2d1512,
        20: #472926,
        30: #623f3b,
        40: #7e5751,
        50: #9b7068,
        60: #b98a80,
        70: #d7a599,
        80: #f6c1b3,
        90: #ffddd6,
        95: #ffede9,
        98: #fff8f6,
        99: #fffbff,
        100: #ffffff,
      )),
    ),
    typography: (
      brand-family: 'Roboto',
      plain-family: 'Roboto'
    ),
    density: 0,
  ));
}

// Theme-specific Material overrides
:root {
  @include apply-material-theme();

  // Bridge Material variables to shadcn/ui system
  // This allows Material components to respect shadcn theme changes
  --mat-sys-primary: rgb(var(--primary));
  --mat-sys-on-primary: rgb(var(--primary-foreground));
  --mat-sys-surface: rgb(var(--background));
  --mat-sys-on-surface: rgb(var(--foreground));
  --mat-sys-surface-variant: rgb(var(--card));
  --mat-sys-on-surface-variant: rgb(var(--card-foreground));
  --mat-sys-outline: rgb(var(--border));
  --mat-sys-outline-variant: rgb(var(--input));
  --mat-sys-secondary: rgb(var(--secondary));
  --mat-sys-on-secondary: rgb(var(--secondary-foreground));
  --mat-sys-tertiary: rgb(var(--accent));
  --mat-sys-on-tertiary: rgb(var(--accent-foreground));
  --mat-sys-error: rgb(var(--destructive));
}

// Dynamic theme adaptations
:root[data-theme="red"] {
  --mat-sys-primary: rgb(220 38 38);
  --mat-sys-on-primary: rgb(255 255 255);
}

:root[data-theme="rose"] {
  --mat-sys-primary: rgb(244 63 94);
  --mat-sys-on-primary: rgb(255 255 255);
}

:root[data-theme="orange"] {
  --mat-sys-primary: rgb(249 115 22);
  --mat-sys-on-primary: rgb(255 255 255);
}

:root[data-theme="green"] {
  --mat-sys-primary: rgb(34 197 94);
  --mat-sys-on-primary: rgb(255 255 255);
}

:root[data-theme="blue"] {
  --mat-sys-primary: rgb(59 130 246);
  --mat-sys-on-primary: rgb(255 255 255);
}

:root[data-theme="yellow"] {
  --mat-sys-primary: rgb(245 158 11);
  --mat-sys-on-primary: rgb(255 255 255);
}

:root[data-theme="violet"] {
  --mat-sys-primary: rgb(139 92 246);
  --mat-sys-on-primary: rgb(255 255 255);
}

// Dark mode adaptations
.dark {
  --mat-sys-surface: rgb(var(--background));
  --mat-sys-on-surface: rgb(var(--foreground));
  --mat-sys-surface-variant: rgb(var(--card));
  --mat-sys-on-surface-variant: rgb(var(--card-foreground));
}

.dark[data-theme="red"] {
  --mat-sys-primary: rgb(248 113 113);
  --mat-sys-on-primary: rgb(15 23 42);
}

.dark[data-theme="rose"] {
  --mat-sys-primary: rgb(251 113 133);
  --mat-sys-on-primary: rgb(15 23 42);
}

.dark[data-theme="blue"] {
  --mat-sys-primary: rgb(96 165 250);
  --mat-sys-on-primary: rgb(15 23 42);
}

// Component-specific overrides to ensure consistency
body {
  // Use shadcn/ui variables instead of Material defaults
  background-color: rgb(var(--background));
  color: rgb(var(--foreground));
  font-family: 'Roboto', "Helvetica Neue", sans-serif;
  margin: 0;
  color-scheme: light;
}

.dark body {
  color-scheme: dark;
}

// Material component overrides for better shadcn/ui integration
.mat-mdc-button {
  // Ensure buttons respect the theme system
  &.mat-primary {
    --mdc-filled-button-container-color: rgb(var(--primary));
    --mdc-filled-button-label-text-color: rgb(var(--primary-foreground));
  }

  &.mat-accent {
    --mdc-filled-button-container-color: rgb(var(--accent));
    --mdc-filled-button-label-text-color: rgb(var(--accent-foreground));
  }
}

.mat-mdc-card {
  --mdc-elevated-card-container-color: rgb(var(--card));
  --mdc-elevated-card-container-surface-tint-layer-color: rgb(var(--card-foreground));
}

.mat-mdc-form-field {
  --mdc-outlined-text-field-outline-color: rgb(var(--border));
  --mdc-filled-text-field-container-color: rgb(var(--input));
}

// Ensure Material dialogs respect the theme
.mat-mdc-dialog-surface {
  background-color: rgb(var(--popover)) !important;
  color: rgb(var(--popover-foreground)) !important;
}
